import{r as v,u as h,d as y,E as b,G as C,j as L,k as S,l as _,m as t,q as n,D as $,s as l,t as f,H as V,v as x,y as k,A,_ as B}from"./index-D4LJPWFD.js";function E(){const r=v(""),s=v(""),o=v(""),u=v(!1),a=y(),i=h();return{handleLogin:async()=>{if(!r.value.trim()||!s.value){o.value="请输入用户名和密码",b.warning(o.value);return}u.value=!0;try{const e=await C(r.value.trim(),s.value),d=e.data?.data??e.data,m=d?.token,c=d?.username;if(!e.ok||!m){o.value=e.data?.message||"登录失败",b.error(o.value);return}i.setAuth(m,c||r.value.trim()),a.push({name:"home"})}catch{o.value="登录失败，请稍后重试",b.error(o.value)}finally{u.value=!1}},loading:u,message:o,password:s,router:a,username:r}}const N={class:"page"},D={class:"card"},M={class:"msg"},R={class:"actions"},U={class:"actions-vertical"},j=L({__name:"LoginView",setup(r){const{handleLogin:s,loading:o,message:u,password:a,username:i}=E();return(g,e)=>{const d=f("el-input"),m=f("el-form-item"),c=f("el-button"),w=f("el-form");return A(),S("div",N,[_("div",D,[t(w,{onSubmit:$(l(s),["prevent"])},{default:n(()=>[t(m,{label:"用户名"},{default:n(()=>[t(d,{modelValue:l(i),"onUpdate:modelValue":e[0]||(e[0]=p=>V(i)?i.value=p:null),placeholder:"请输入用户名",autocomplete:"username"},null,8,["modelValue"])]),_:1}),t(m,{label:"密码"},{default:n(()=>[t(d,{modelValue:l(a),"onUpdate:modelValue":e[1]||(e[1]=p=>V(a)?a.value=p:null),type:"password",placeholder:"请输入密码",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),_("div",M,x(l(u)),1),_("div",R,[t(c,{type:"primary",loading:l(o),class:"btn",onClick:l(s),block:""},{default:n(()=>[...e[4]||(e[4]=[k("登录",-1)])]),_:1},8,["loading","onClick"]),_("div",U,[t(c,{class:"btn-ghost",block:"",onClick:e[2]||(e[2]=p=>g.$router.push({name:"register"}))},{default:n(()=>[...e[5]||(e[5]=[k("没有账号？去注册",-1)])]),_:1}),t(c,{class:"btn-ghost",block:"",onClick:e[3]||(e[3]=p=>g.$router.push({name:"home"}))},{default:n(()=>[...e[6]||(e[6]=[k("返回首页",-1)])]),_:1})])])]),_:1},8,["onSubmit"])])])}}}),G=B(j,[["__scopeId","data-v-ca08bb27"]]);export{G as default};
