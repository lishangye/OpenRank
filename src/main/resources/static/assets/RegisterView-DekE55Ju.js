import{r as m,u as y,d as x,H as S,i as h,k as C,l as a,m as f,s as p,p as v,q as l,G as g,v as A,x as V,A as B,_ as N}from"./index-CPF3msdy.js";function U(){const s=m(""),t=m(""),r=m(""),u=m(""),i=m(!1),o=x(),d=y();return{email:t,handleRegister:async()=>{if(!s.value.trim()||!r.value){u.value="用户名和密码必填";return}i.value=!0;const e=await S(s.value.trim(),r.value,t.value.trim());if(i.value=!1,!e.ok||!e.data.token){u.value=e.data.message||"注册失败";return}d.setAuth(e.data.token,e.data.username||s.value.trim()),o.push({name:"home"})},loading:i,message:u,password:r,router:o,username:s}}const $={class:"page"},q={class:"card"},D={class:"msg"},E={class:"actions"},G=h({__name:"RegisterView",setup(s){const{email:t,handleRegister:r,loading:u,message:i,password:o,username:d}=U();return(b,e)=>{const w=p("van-nav-bar"),c=p("van-field"),_=p("van-button"),k=p("van-space"),R=p("van-form");return B(),C("div",$,[a(w,{title:"注册","left-arrow":"",onClickLeft:e[0]||(e[0]=n=>b.$router.back())}),f("div",q,[a(R,{onSubmit:l(r)},{default:v(()=>[a(c,{modelValue:l(d),"onUpdate:modelValue":e[1]||(e[1]=n=>g(d)?d.value=n:null),name:"username",label:"用户名",placeholder:"请输入用户名",autocomplete:"username"},null,8,["modelValue"]),a(c,{modelValue:l(t),"onUpdate:modelValue":e[2]||(e[2]=n=>g(t)?t.value=n:null),name:"email",type:"email",label:"邮箱",placeholder:"请输入邮箱",autocomplete:"email"},null,8,["modelValue"]),a(c,{modelValue:l(o),"onUpdate:modelValue":e[3]||(e[3]=n=>g(o)?o.value=n:null),name:"password",type:"password",label:"密码",placeholder:"请输入密码",autocomplete:"new-password"},null,8,["modelValue"]),f("div",D,A(l(i)),1),f("div",E,[a(_,{block:"",round:"",type:"primary","native-type":"submit",loading:l(u)},{default:v(()=>[...e[4]||(e[4]=[V("注册",-1)])]),_:1},8,["loading"]),a(k,{direction:"vertical",fill:""},{default:v(()=>[a(_,{block:"",round:"",plain:"",to:{name:"login"}},{default:v(()=>[...e[5]||(e[5]=[V("已有账号？去登录",-1)])]),_:1}),a(_,{block:"",round:"",plain:"",to:{name:"home"}},{default:v(()=>[...e[6]||(e[6]=[V("返回首页",-1)])]),_:1})]),_:1})])]),_:1},8,["onSubmit"])])])}}}),I=N(G,[["__scopeId","data-v-518104a9"]]);export{I as default};
