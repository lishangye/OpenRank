import{r as p,u as L,d as y,E as h,i as x,k as S,l as a,m as v,s as u,p as d,q as i,G as b,v as C,x as _,A,_ as B}from"./index-CPF3msdy.js";function N(){const n=p(""),t=p(""),s=p(""),l=p(!1),o=y(),r=L();return{handleLogin:async()=>{if(!n.value.trim()||!t.value){s.value="请输入用户名和密码";return}l.value=!0;const e=await h(n.value.trim(),t.value);if(l.value=!1,!e.ok||!e.data.token){s.value=e.data.message||"登录失败";return}r.setAuth(e.data.token,e.data.username||n.value.trim()),o.push({name:"home"})},loading:l,message:s,password:t,router:o,username:n}}const E={class:"page"},R={class:"card"},U={class:"msg"},$={class:"actions"},q=x({__name:"LoginView",setup(n){const{handleLogin:t,loading:s,message:l,password:o,username:r}=N();return(f,e)=>{const V=u("van-nav-bar"),g=u("van-field"),c=u("van-button"),k=u("van-space"),w=u("van-form");return A(),S("div",E,[a(V,{title:"登录","left-arrow":"",onClickLeft:e[0]||(e[0]=m=>f.$router.back())}),v("div",R,[a(w,{onSubmit:i(t)},{default:d(()=>[a(g,{modelValue:i(r),"onUpdate:modelValue":e[1]||(e[1]=m=>b(r)?r.value=m:null),name:"username",label:"用户名",placeholder:"请输入用户名",autocomplete:"username"},null,8,["modelValue"]),a(g,{modelValue:i(o),"onUpdate:modelValue":e[2]||(e[2]=m=>b(o)?o.value=m:null),name:"password",type:"password",label:"密码",placeholder:"请输入密码",autocomplete:"current-password"},null,8,["modelValue"]),v("div",U,C(i(l)),1),v("div",$,[a(c,{block:"",round:"",type:"primary","native-type":"submit",loading:i(s)},{default:d(()=>[...e[3]||(e[3]=[_("登录",-1)])]),_:1},8,["loading"]),a(k,{direction:"vertical",fill:""},{default:d(()=>[a(c,{block:"",round:"",plain:"",to:{name:"register"}},{default:d(()=>[...e[4]||(e[4]=[_("没有账号？去注册",-1)])]),_:1}),a(c,{block:"",round:"",plain:"",to:{name:"home"}},{default:d(()=>[...e[5]||(e[5]=[_("返回首页",-1)])]),_:1})]),_:1})])]),_:1},8,["onSubmit"])])])}}}),G=B(q,[["__scopeId","data-v-6ee7ec06"]]);export{G as default};
